/*! License information is available at licenses.txt */"use strict";(self.webpackChunk_creditiq_checkout=self.webpackChunk_creditiq_checkout||[]).push([[179],{67609:(e,t,r)=>{var n=r(31426);(async()=>{const e=(0,n.V8)(),t=n.qT?Promise.all([r.e(888),r.e(626)]).then(r.bind(r,8011)):void 0,a=await e,s=(0,n.Gx)({applicationCreator:a.loanApplicationCreator,tokenBundleOrLinkToken:a.tokenBundleOrLinkToken});await(await(t||Promise.all([r.e(888),r.e(626)]).then(r.bind(r,8011)))).init(s,a)})()},31426:(e,t,r)=>{r.d(t,{GH:()=>S,Gx:()=>q,V8:()=>F,RO:()=>U,CZ:()=>R,Q0:()=>g,qT:()=>I,n:()=>D,sk:()=>E,I6:()=>b,SK:()=>P});var n=r(17481),a=r(51367),s=r(92666),o=r(17338),i=r(9851),c=r(30583),l=r(43868);const d=e=>isNaN(e)?void 0:e,u=r(24285);function p(e){return e?Object.keys(e).reduce(((t,r)=>t+(e[r]?1:0)),0):0}var h=r(98353),A=r(37769),m=r(29835),T=r(75793),y=r(44413),f=(r(39922),r(25615));const w=r(24285).parse(window.location.search.substring(1)),R="true"===w.inline||"true"===w.isInline,g="true"===w.isNonConsumer||"true"===w.nonConsumer,I="true"===w.preloading,E=window.top!==window&&"true"===w.captureFullStoryOuterPage,k=w.origin,S=new T.J((0,y.e)().API_BASE_URL,(()=>null),(()=>v?Promise.resolve(v):"auth/web-token"));let v,C;const O=(0,m.oi)(),N={openRequested:async()=>{C=performance.now()},start:async e=>{O.resolver({postPreloadOptions:e,openRequested:C})},update:async e=>{await L(e)}};let L=e=>{console.warn("update called prior to updater being set, this will have no effect")};const P=e=>{L=e};function B(){return window.top!==window}const D=B()?(0,f.y1)({parentOrigin:k,methods:N}):{promise:Promise.resolve({close:async()=>{},resetScroll:async()=>{},setFrameStyles:async e=>{},changelog:async(e,t)=>{},requestSDKOptions:async()=>async function(){const{username:e="rock-next",password:t="rock-next-pw",...r}=function(e){const t=u.parse(e);console.log(t);const r={type:l.oq.parse(t.vehicleType||""),vin:t.vehicleVin,stockId:t.vehicleStockId,year:d(parseInt(t.vehicleYear||"",10)),make:t.vehicleMake,model:t.vehicleModel,body:t.vehicleBody,trim:t.vehicleTrim,condition:l.L2.parse(t.vehicleCondition||""),mileage:d(parseInt(t.vehicleMileage||"",10)),salePrice:d(parseFloat(t.vehicleSalePrice||"")),msrp:d(parseFloat(t.vehicleMsrp||"")),invoicePrice:d(parseFloat(t.vehicleInvoicePrice||"")),curbWeight:d(parseInt(t.vehicleCurbWeight||"",10)),gvw:d(parseInt(t.vehicleGvw||"",10)),gvwr:d(parseInt(t.vehicleGvwr||"",10)),registrationState:t.vehicleRegistrationState||void 0,registrationExpiration:t.vehicleRegistrationExpiration||void 0,imageUrl:t.vehicleImageUrl||void 0},n={type:l.oq.parse(t.tradeInVehicleType||""),vin:t.tradeInVehicleVin,year:d(parseInt(t.tradeInVehicleYear||"",10)),make:t.tradeInVehicleMake,model:t.tradeInVehicleModel,body:t.tradeInVehicleBody,trim:t.tradeInVehicleTrim,condition:l.L2.parse(t.tradeInVehicleCondition||""),mileage:d(parseInt(t.tradeInVehicleMileage||"",10)),loanBalance:d(parseFloat(t.tradeInVehicleLoanBalance||"")),tradeAllowance:d(parseFloat(t.tradeInVehicleTradeAllowance||""))},c={line1:t.dealerAddressLine1,line2:t.dealerAddressLine2,city:t.dealerAddressCity,state:t.dealerAddressState,zip:t.dealerAddressZip},h={name:t.dealerName,phone:t.dealerPhone&&t.dealerPhone.replace(/\D/g,"")||void 0,website:t.dealerWebsite,email:t.dealerEmail,address:p(c)?c:void 0},A=t.allowedTxnTypes?Array.isArray(t.allowedTxnTypes)?t.allowedTxnTypes:[t.allowedTxnTypes]:[],m=t.flowName,T=t.theme,y="true"===t.isNonConsumer,f="true"===t.ciq_sdk_forceAppIdInDealSummary,w="true"===t.embed,R="true"===t.hideHeader,g={addressLine1:t.applicantResidencesAddressLine1,city:t.applicantResidencesCity,state:t.applicantResidencesState,county:t.applicantResidencesCounty,zip:t.applicantResidencesZip,plus4Code:t.applicantResidencesPlus4Code},I={preQual:"true"===t.applicantAuthorizationsPreQual||void 0},E=t.applicantPhone||t.applicantPhones,k={firstName:t.applicantFirstName,lastName:t.applicantLastName,email:t.applicantEmail,selfReportedCreditScore:d(parseInt(t.applicantSelfReportedCreditScore,10)),phones:E?Array.isArray(E)?E:[E]:void 0,residences:p(g)?[g]:void 0,authorizations:p(I)?I:void 0},S=t.consumerInfoId?{id:t.consumerInfoId}:void 0;return{username:t._username,password:t._password,allowedTxnTypes:A,flowName:m,theme:T,isNonConsumer:y,forceAppIdInDealSummary:f,isEmbed:w,hideHeader:R,authTokenBundle:void 0,sourceOrgId:t.sourceOrgId,destinationOrgId:t.destinationOrgId||t.dealerId,productType:i.wO.parse(t.productType||"")||i.wO.AUTO,vehicle:p(r)?r:void 0,tradeInVehicle:p(n)?n:void 0,dealer:p(h)?h:void 0,downPayment:d(parseFloat(t.downPayment||"")),requestedTerm:d(parseInt(t.requestedTerm||"",10)),isInline:"true"===t.isInline,linkToken:t.linkToken||t.ciq_sdk_linkToken,disableAutoComplete:void 0,applicant:p(k)?k:void 0,coApplicant:void 0,role:void 0,metadata:void 0,registrationDetails:void 0,suppliedStructure:void 0,selectedIncentiveQualificationIds:null!=t.selectedIncentiveQualificationIds?a.Z(s.Z(t.selectedIncentiveQualificationIds)):void 0,consumerInfo:S,enableConsumerAuth:"true"===t.enableConsumerAuth,skipToLatestStep:"true"===t.skipToLatestStep,trackingTags:o.Z(t,((e,t,r)=>r.startsWith("trackingTags.")?{...e,[r.replace(/^trackingTags\./,"")]:"true"===t||"false"!==t&&t}:e),{})}}(window.location.search.substring(1)),n=await(async()=>{0})();return{...r,authTokenBundle:n??r.authTokenBundle}}(),preloaded:async()=>{},loaded:async()=>{},setFSVars:async()=>{}})};let _;D.promise.then((e=>_=e));const U=()=>{if(!_)throw new Error("tried to access penpal before it resolved");return _};B()||N.start();const b=e=>v=e,q=e=>S.doPost("auth/checkout-session",e);const F=async()=>{const e=await async function(){return(await D.promise).requestSDKOptions()}(),t=function(e){return{sourceOrgId:e.sourceOrgId,applicant:e.applicant,productType:i.wO.parse(e.productType||"")||i.wO.AUTO,decisioningType:c.m.PREFERRED_PARALLEL,...n.Z(e,"destinationOrgId","vehicle","tradeInVehicle","dealer","downPayment","requestedTerm","metadata","registrationDetails","coApplicant","suppliedStructure")}}(e),r=h.Z(A.Z(e,["metadata","registrationDetails","applicant","coApplicant","suppliedStructure"]),((e,t)=>`query-${t}`));console.log(`SDK Role: ${e.role||"(none)"}`);const a=function(e){switch(e="string"==typeof e?e:e&&e.name||void 0){case"Sales":return $(e,H);case"Finance Director":return $(e,["PRODUCTS","ADJUSTMENTS"]);case"Automotive Underwriter":return $(e,["DOCS"]);default:return $("DEFAULT",H)}}(e.role),s={loanApplicationCreator:t,queryParamTags:r,isNonConsumer:e.isNonConsumer,forceAppIdInDealSummary:e.forceAppIdInDealSummary,allowedTxnTypes:e.allowedTxnTypes,isInline:R,tokenBundleOrLinkToken:e.authTokenBundle||e.linkToken,role:a},o=await async function(){const e=performance.now();await(await D.promise).preloaded();const{openRequested:t,postPreloadOptions:r}=await O.promise;return window.FS?.restart(),{...r,perfInfo:{start:e,end:performance.now(),openRequested:t}}}()||{},l=A.Z(o,"isEmbed","hideHeader","flowName","theme","perfInfo","consumerInfo","trackingTags","enableConsumerAuth","skipToLatestStep"),d={applicant:{},...s.loanApplicationCreator,...l};return(0,m.Yt)({...s,flowNameOverride:o.flowName??e.flowName,theme:o.theme??e.theme,isEmbed:o.isEmbed??e.isEmbed,hideHeader:o.hideHeader??e.hideHeader,loanApplicationCreator:d,perfInfo:o.perfInfo,consumerInfo:o.consumerInfo??e.consumerInfo,enableConsumerAuth:o.enableConsumerAuth??e.enableConsumerAuth,skipToLatestStep:o.skipToLatestStep??e.skipToLatestStep,trackingTags:{...e.trackingTags,...o.trackingTags}})};function $(e,t){return{name:e,permissions:t}}const H=["DOCS","PRODUCTS","ADJUSTMENTS"]},30096:(e,t,r)=>{r.d(t,{HP:()=>o,$S:()=>i});var n=r(85534),a=r(14524),s=r(24454);function o(e){return n.Z(a.Z(e.replace(/[_-]/g," ")))}function i(e,t,r){const n={creator:e},a=e=>t?e.toLowerCase():e;for(const t in e)n[t]=a(t);return Object.defineProperty(n,"parse",{value:(e,t=!0)=>{if(!e)return;if(r){const s=Object.keys(r).filter((e=>"creator"!==e)).filter((t=>t.toLowerCase()===e.toLowerCase()))[0];if(s)return t?n[r[s]]:a(s)}const s=Object.keys(n).filter((e=>"creator"!==e)).filter((t=>t.toLowerCase()===e.toLowerCase()))[0];return n[s]}}),Object.defineProperty(n,"values",{value:(e=!1)=>s.Z(Object.keys(n).filter((e=>"creator"!==e)).map((t=>n.parse(n[t],e))).filter((e=>!!e)))}),n}},9851:(e,t,r)=>{r.d(t,{wO:()=>n,Jw:()=>a,EN:()=>s});const n=(0,r(30096).$S)({AUTO:"",ANCILLARY:"",INSURANCE:"",AUTO_PURCHASE:"",AUTO_REFINANCE:"",WARRANTY_PURCHASE:"",INSURANCE_PURCHASE:""},!0,{AUTO_PURCHASE:"AUTO",AUTO_REFINANCE:"AUTO",WARRANTY_PURCHASE:"ANCILLARY",INSURANCE_PURCHASE:"INSURANCE"}),a=e=>e===n.AUTO,s=e=>e===n.ANCILLARY},30583:(e,t,r)=>{r.d(t,{m:()=>n});const n=(0,r(30096).$S)({UNQUALIFIED:"",WATERFALL:"",PARALLEL:"",PREFERRED_PARALLEL:""},!0)},43868:(e,t,r)=>{r.d(t,{_v:()=>s,lV:()=>o,Uh:()=>i,pN:()=>c,X0:()=>l,vd:()=>d,_o:()=>u,jP:()=>p,oq:()=>h,L2:()=>A,Xh:()=>m,JX:()=>T,Ev:()=>y,US:()=>f});var n=r(30096),a=r(21203);const s=(0,n.$S)({ACCU_TRADE:"",BLACKBOOK:"",EDMUNDS:"",KBB:"",NADA:"",PRICING:""},!1),o={[s.ACCU_TRADE]:{name:"Accu-Trade®",legalName:"Accu-Trade, a CARS Company"},[s.KBB]:{name:"Kelley Blue Book®",legalName:"Kelley Blue Book Co., Inc."},[s.NADA]:{name:"NADA",legalName:"J.D. Power"},[s.BLACKBOOK]:{name:"Blackbook",legalName:"Blackbook"},[s.EDMUNDS]:{name:"Edmunds",legalName:"Edmunds"},[s.PRICING]:{name:"Pricing",legalName:"Pricing"}},i=(0,n.$S)({KBB:"",ACCU_TRADE:""}),c=(0,n.$S)({PASSENGER_VEHICLE:"",LIGHT_TRUCK:"",SUV:""}),l=(0,n.$S)({GAS:"",ELECTRIC:"",DIESEL:"",HYBRID:""});var d,u;!function(e){e.AWD="AWD",e["4WD"]="4WD",e.FWD="FWD",e.RWD="RWD"}(d||(d={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(u||(u={}));const p=(0,n.$S)({WHOLESALE:"",RETAIL:"",TRADE_IN:"",LENDING:""},!0),h=(0,n.$S)({NEW:"",USED:""},!0),A=(0,n.$S)({FAIR:"",GOOD:"",VERY_GOOD:"",EXCELLENT:""},!0);const m=e=>e===h.NEW,T=e=>e===h.USED;function y(e,t){const r="string"==typeof e?e:e.type;return("object"==typeof e?e.isCertified:t)?"Certified":a.Z(r)}const f=(0,n.$S)({FRONT:"",INTERIOR:"",LEFT_SIDE:"",MECHANICAL:"",NON_FACTORY_OR_AFTERMARKET:"",REAR:"",RIGHT_SIDE:"",ROOF:"",TIRES_AND_WHEELS:"",WARNING_LIGHTS:"",OTHER:""},!1)},29835:(e,t,r)=>{r.d(t,{tI:()=>d,cq:()=>u,oi:()=>p,Gh:()=>h,Yt:()=>A,gL:()=>m,uo:()=>y,qp:()=>f,Zk:()=>w,fD:()=>R,YG:()=>E,FO:()=>v,lb:()=>C,uf:()=>O,T3:()=>N,CN:()=>L,H_:()=>P});var n=r(9332),a=r(18654),s=r(77651),o=r(84682),i=r(32617),c=(r(7511),r(972)),l=r.n(c);new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");function d(e){return!!e&&void 0!==e.then}function u(e,t){return d(e)?e.then((e=>t(e))):t(e)}function p(){let e=n.Z;const t=new Promise((t=>{e=t}));return{resolver:e,promise:t}}const h=(e,t=(e=>e),r=(e=>e),n=(e=>e),s=(e=>e),o={})=>{if(Array.isArray(e)){const a=n(e);return Array.isArray(a)?o.mutable?(a.forEach(((e,i)=>a[i]=h(e,t,r,n,s,o))),a):a.map((e=>h(e,t,r,n,s,o))):h(e,t,r,n,s,o)}if(a.Z(e)){const i=s(e);if(!a.Z(i))return h(s(e),t,r,n,s,o);const c={},l=Reflect.ownKeys(i).reduce(((e,a)=>{const l=r(a);return c[l]=!0,e[l]=h(i[a],t,r,n,s,o),e}),o.mutable?i:{});return o.mutable&&Reflect.ownKeys(l).forEach((e=>{c[e]||delete l[e]})),l}return t(e)},A=e=>h(e,(e=>null===e?void 0:e)),m=e=>h(e,(e=>void 0===e?null:e));class T extends Error{}const y=(e,t=!1)=>{let r=0,n=-1;const a={};return async(...s)=>{const o=r++;return new Promise((async(r,i)=>{let c,l;try{l=await e(...s)}catch(e){c=e}a[o]={resolveOrReject:()=>void 0!==c?i(c):r(l),reject:i},Object.keys(a).forEach((e=>{const r=parseInt(e,10);r-1===n||t&&r>n?(n=r,a[r].resolveOrReject(),delete a[r]):t&&(a[r].reject(new T(`Out of order promise detected ${o}, lastResolved : ${n}`)),delete a[r])}))}))}},f=e=>{let t=Promise.resolve(),r=0;return(...n)=>{const a=async()=>{try{return++r,await e(...n)}finally{--r,r<=0&&(t=Promise.resolve())}};return t=t.then(a,a),t}};function w(e,t,r="Retrying on error",n=10){return async(...a)=>{const s=async o=>{try{return await e(...a)}catch(e){if(t(e)){if(o>0)return console.log(r),new Promise(((e,t)=>{setTimeout((async()=>{o--;try{e(await s(o-1))}catch(e){t(e)}}),1e3*(n-o))}));console.log("Max retries exceeded and still seeing errors. Throwing...")}throw e}};return s(n)}}const R=e=>"Failed to fetch"===e.message&&"TypeError"===e.name;const g=e=>Array.isArray(e)&&e.some((e=>"object"!=typeof e)),I=e=>e.filter((e=>null!=e&&(!k(e)||(e=>k(e)&&!0===e.meta?.isPersistent)(e)))),E=(e,t)=>{if(null!=t){if(g(e)||g(t))return Array.isArray(t)?I(t):t;null==e&&(e=Array.isArray(t)?[]:{});const r=Array.isArray(t)&&Array.isArray(e)&&e.length>t.length?e:t;for(const n in r){const r=e[n],a=t[n];if(e!==a)if(a&&"object"==typeof a&&!s.Z(a)){const t=Array.isArray(a)?r&&Array.isArray(r)?r:[]:r||{};e[n]=k(a)?a:E(t,a),Array.isArray(e[n])&&(e[n]=I(e[n]))}else void 0!==a&&(e[n]=a)}}return Array.isArray(e)?I(e):e},k=e=>{if(Array.isArray(e)||null!==e.raw)return!1;return 0===Object.keys(e).filter((e=>"raw"!==e&&"meta"!==e)).length};function S(e,t=[]){return 0===e.length?[t]:o.Z(i.Z(e)?.map((r=>S(e.slice(1),[...t,r]))))}function v(e){return S(e.filter((e=>e.length>0)))}const C=e=>l()(e).format("$0,0[.]00"),O=e=>l()(e).format("0,0[.]00"),N=e=>l()(e).format("0.00%"),L=e=>(e||"").replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");function P(e,t){return Array.isArray(e)?e.map((e=>t(e))):t(e)}},44413:(e,t,r)=>{r.d(t,{e:()=>a});const n=e=>window.ciqUrls?.[e],a=()=>({API_STAGE:n("API_STAGE")??"prod",API_BASE_URL:n("API_BASE_URL")??"/api",SOCKET_BASE_URL:n("SOCKET_BASE_URL")??"https://socket.creditiq.com",CHECKOUT_BASE_URL:n("CHECKOUT_BASE_URL")??"checkout.creditiq.com"})},75793:(e,t,r)=>{r.d(t,{J:()=>o,F:()=>c});var n=r(29835),a=r(28306),s=r(55722);class o{constructor(e,t,r,n){this.gettingTokenResolvers=[],this.apiBaseUrl=e,this.onRefreshFailure=t,"function"==typeof r?this.getToken=r:this.authPath=r,this.refreshSuppliedToken=n}setExtraGraphQLHeaders(e){this.extraGraphQLHeaders=e}async getAccessToken(){return this.gettingTokenPromise&&await this.gettingTokenPromise,this.authBundle?Date.now()<this.authBundle.expiresAt-6e4?this.authBundle.accessToken:(await this.refresh(this.authBundle)).accessToken:new Promise((e=>{this.gettingTokenResolvers=[...this.gettingTokenResolvers,e]}))}async fetchAuthTokenBundle(e){const t=this.gettingTokenPromise=this.getTokenBundle(e),r=await t;return this.authBundle=r,this.gettingTokenResolvers.forEach((e=>{e(r.accessToken)})),this.gettingTokenResolvers=[],this.gettingTokenPromise=void 0,this.authBundle}async authenticatedGet(e,t){return this.authenticatedRequest("GET",e,t)}async authenticatedPost(e,t,r){return this.authenticatedRequest("POST",e,r,t)}async authenticatedRequest(e,t,r,n){const a=r?Object.keys(r).reduce(((e,t)=>{const n=r[t];return n&&(e[t]=n),e}),{}):{};return this.doRequest(e,t,{Authorization:`Bearer ${await this.getAccessToken()}`,...this.extraGraphQLHeaders,...a},n)}async graphqlRequest(e,t={},r=!1,a){const s=e.match(/{(\s)*(\w+\s*\:\s*)?(\w*)/),o=s&&s[3],{result:c,response:l}=await this.doRequestReturnResponse("POST",`graphql?op=${o||""}${"fireItemAction"===o&&t.action&&`&action=${t.action}`||""}`,{Authorization:`Bearer ${await this.getAccessToken()}`,...this.extraGraphQLHeaders},{query:e,variables:t},a);if(c&&c.errors&&c.errors.length)throw i(l,`Failed GraphQL request: ${JSON.stringify(c.errors)}`);return c&&r?c.data:(0,n.Yt)(c.data)}async doRequest(e,t,r,n,a){return(await this.doRequestReturnResponse(e,t,r,n,a)).result}async doGet(e,t,r){return(await this.doRequestReturnResponse("GET",e,t,r)).result}async doPost(e,t,r,n){return(await this.doRequestReturnResponse("POST",e,r,t,n)).result}async getTokenBundle(e){const t=this.getToken&&this.getToken(),r=await("string"==typeof t||null==t?this.doPost(t||this.authPath||"",{...e}):t);return this.getAuthBundleFromToken(r)}async refreshTokenBundle(e){try{const t=await(this.refreshSuppliedToken?this.refreshSuppliedToken(e):this.doRefresh(e));return this.getAuthBundleFromToken(t)}catch(e){const t=e||new Error("refresh failed");throw this.onRefreshFailure(t),t}}getAuthBundleFromToken(e){return{...e,expiresAt:1e3*(0,a.Z)(e.accessToken).exp}}async refresh(e){const t=this.gettingTokenPromise=this.refreshTokenBundle(e);return this.authBundle=await t,this.gettingTokenPromise=void 0,this.authBundle}async doRefresh(e){const t=await fetch(`${this.apiBaseUrl}/auth/refresh`,{method:"POST",headers:{Authorization:`Bearer ${e.refreshToken}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(t.statusText);const r=await t.text();return r&&JSON.parse(r)}async doRequestReturnResponse(e,t,r,n,a){const s=await fetch(`${this.apiBaseUrl}/${t}`,{method:e,mode:"cors",headers:{"Content-Type":"application/json",...r},body:JSON.stringify(n),credentials:"include",...a}),o=await s.text();if(!s.ok)throw i(s,o);return{result:o&&JSON.parse(o),response:s}}}const i=(e,t)=>new Error(`${e.statusText}\nRequestId:\n${e.headers.get("x-ciq-request-id")}\n${t}\n`),c=(e,t)=>s.Z(e,((e,r)=>async function(...n){try{return await e.apply(this,arguments)}catch(e){const n=!window.navigator.onLine;throw console.error(`Api method: "${r}" failed.\n        ${n?"Browser reported user was OFFLINE. ":""}Original error: `,e),t&&t(r),e}}))}},e=>{e.O(0,[178],(()=>{return t=67609,e(e.s=t);var t}));e.O()}]);